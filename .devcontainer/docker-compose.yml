services:
  devcontainer:
    image: mcr.microsoft.com/devcontainers/rust:latest
    volumes:
      - ..:/workspaces/pg_moonlink:cached
    networks:
      - postgres_network
      - iceberg_network
    command: sleep infinity

  postgres:
    image: postgres
    environment:
      POSTGRES_PASSWORD: postgres
    command: ["-c", "wal_level=logical"]
    networks:
      - postgres_network

  iceberg:
    image: tabulario/iceberg-rest:latest
    ports:
      - "8181:8181"
    networks:
      - iceberg_network

networks:
  postgres_network:
  iceberg_network:
